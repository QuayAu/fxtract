---
title: "R6 Class Project"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{fxtract}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r, echo = FALSE}
unlink("projects", recursive = TRUE)
```

- Designed for large projects
- Features can be updated easily
- Features are calculated on each grouping variable individually with batchtools

Usage: 
```{r, message = FALSE}
library(fxtract)
my_project = Project$new("my_project")
```

## Add Data
Data must be added as dataframes with `$add_data`, where the grouping variable must be specified.
You can also add dataframes for each grouping variable individually. This is especially helpful for large datasets.
```{r, message = FALSE}
library(dplyr)
iris1 = iris %>% filter(Species %in% c("setosa", "versicolor"))
iris2 = iris %>% filter(Species == "virginica")
my_project$add_data(iris1, group_by = "Species")
my_project$add_data(iris2, group_by = "Species")
```

## Add Features
Features can be added as functions. These functions must have a dataframe as input and a named vector as output.
This function will be calculated for each grouping variable individually.
```{r, message = FALSE}
fun1 = function(data) {
  c(mean_sepal_length = mean(data$Sepal.Length),
    sd_sepal_length = sd(data$Sepal.Length))
}

fun2 = function(data) {
  c(mean_petal_length = mean(data$Petal.Length),
    sd_petal_length = sd(data$Petal.Length))
}
```


```{r, message = FALSE}
my_project$add_feature(fun1)
my_project$add_feature(fun2)
```

## Calculate Features
Features are calculated by the method `$calculate_features()`:
```{r, message = FALSE}
my_project$calc_features()
```

## Collect Results
The desired final dataframe can be generated by the method `$collect_results()`:
```{r, message = FALSE}
my_project$collect_results()
```

More functionality of this R6 class is discussed [here](https://quayau.github.io/fxtract/docs/articles/tutorial/usecase_large_project.html).
